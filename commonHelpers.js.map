{"version":3,"file":"commonHelpers.js","sources":["../src/api-service.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst PER_PAGE = 40;\nconst API_KEY = '44883181-49eb7880702be53042c4f854e';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport default class ApiService {\n  #searchQuery;\n  #page;\n  #totalHits;\n\n  constructor() {\n    this.#searchQuery = '';\n    this.#page = 1;\n    this.#totalHits = 0;\n  }\n\n    addPage() {\n      this.#page += 1;\n   }\n\n  resetPage() {\n    this.#page = 1;\n  }\n\n  //isMorePage() {\n  //  return PER_PAGE * (this.#page - 1) < this.#totalHits;\n  //}\n\n  get totalHits() {\n    return this.#totalHits;\n  }\n\n  get currentPage() {\n    return this.#page;\n  }\n\n  set searchQuery(value) {\n    this.#searchQuery = value;\n  }\n\n  async fetchImage() {\n    const responce = await axios.get(\n      `${BASE_URL}?key=${API_KEY}&q=${\n        this.#searchQuery\n      }&image_type=photo&orientation=horizontal&safesearch=true&per_page=${PER_PAGE}&page=${\n        this.#page\n      }`\n    );\n    this.#totalHits = responce.data.totalHits;\n    return responce.data;\n  }\n}\n","// Opisany w dokumentacji\nimport SimpleLightbox from 'simplelightbox';\n// Opcjonalny import stylów\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n// Opisany w dokumentacji\nimport iziToast from 'izitoast';\n// Opcjonalny import stylów\nimport 'izitoast/dist/css/iziToast.min.css';\nimport ApiService from './api-service';\n\nconst loadMoreBtn = document.querySelector('.load-more');\n\nconst formRef = document.getElementById('search-form');\nconst imageContainerRef = document.querySelector('.gallery');\n\nconst search = new ApiService();\nconst lightBox = new SimpleLightbox('.gallery a');\n\nformRef.addEventListener('submit', submitForm);\nloadMoreBtn.addEventListener('click', loadMoreImages);\n\nfunction submitForm(event) {\n  event.preventDefault();\n  imageContainerRef.innerHTML = '';\n  //loadMoreBtn.classList.add('hidden');\n  search.searchQuery = formRef.elements.searchQuery.value;\n  formRef.reset();\n  addImageAndUpdateUI();\n}\n\nasync function addImageAndUpdateUI() {\n  try {\n    const image = await search.fetchImage();\n    if (search.currentPage === 1 && search.totalHits !== 0) {\n      iziToast.success({\n        message: `Hooray! We found ${search.totalHits} images.`,\n      });\n    }\n    renderImage(image.hits);\n  } catch {\n    iziToast.error({\n      message: 'Oops! Something went wrong! Try to reload the page!',\n    });\n  }\n}\n\nfunction renderImage(array) {\n  if (!array.length) {\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again.',\n    });\n    return;\n  }\n  const markup = array\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<div class=\"photo-card\">\n        <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n            <div class=\"info\">\n              <p class=\"info-item\">\n                <b>Likes</b>\n                ${likes}\n              </p>\n              <p class=\"info-item\">\n                <b>Views</b>\n                ${views}\n              </p>\n              <p class=\"info-item\">\n                <b>Comments</b>\n                ${comments}\n              </p>\n              <p class=\"info-item\">\n                <b>Downloads</b>\n                ${downloads}\n              </p>\n            </div></a>\n          </div>`;\n      }\n    )\n    .join('');\n  imageContainerRef.insertAdjacentHTML('beforeend', markup);\n  lightBox.refresh();\n  search.addPage();\n}\nfunction loadMoreImages() {\n  this.page += 1;\n  addImageAndUpdateUI();\n}\n"],"names":["PER_PAGE","API_KEY","BASE_URL","ApiService","__privateAdd","_searchQuery","_page","_totalHits","__privateSet","__privateGet","value","responce","axios","loadMoreBtn","formRef","imageContainerRef","search","lightBox","SimpleLightbox","submitForm","loadMoreImages","event","addImageAndUpdateUI","image","iziToast","renderImage","array","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"ulCACA,MAAMA,EAAW,GACXC,EAAU,qCACVC,EAAW,qCAEF,MAAMC,CAAW,CAK9B,aAAc,CAJdC,EAAA,KAAAC,EAAA,QACAD,EAAA,KAAAE,EAAA,QACAF,EAAA,KAAAG,EAAA,QAGEC,EAAA,KAAKH,EAAe,IACpBG,EAAA,KAAKF,EAAQ,GACbE,EAAA,KAAKD,EAAa,EACnB,CAEC,SAAU,CACRC,EAAA,KAAKF,EAALG,EAAA,KAAKH,GAAS,EAChB,CAEF,WAAY,CACVE,EAAA,KAAKF,EAAQ,EACd,CAMD,IAAI,WAAY,CACd,OAAOG,EAAA,KAAKF,EACb,CAED,IAAI,aAAc,CAChB,OAAOE,EAAA,KAAKH,EACb,CAED,IAAI,YAAYI,EAAO,CACrBF,EAAA,KAAKH,EAAeK,EACrB,CAED,MAAM,YAAa,CACjB,MAAMC,EAAW,MAAMC,EAAM,IAC3B,GAAGV,CAAQ,QAAQD,CAAO,MACxBQ,EAAA,KAAKJ,EACb,qEAA2EL,CAAQ,SAC3ES,EAAA,KAAKH,EACb,EACA,EACI,OAAAE,EAAA,KAAKD,EAAaI,EAAS,KAAK,WACzBA,EAAS,IACjB,CACH,CA7CEN,EAAA,YACAC,EAAA,YACAC,EAAA,YCEF,MAAMM,EAAc,SAAS,cAAc,YAAY,EAEjDC,EAAU,SAAS,eAAe,aAAa,EAC/CC,EAAoB,SAAS,cAAc,UAAU,EAErDC,EAAS,IAAIb,EACbc,EAAW,IAAIC,EAAe,YAAY,EAEhDJ,EAAQ,iBAAiB,SAAUK,CAAU,EAC7CN,EAAY,iBAAiB,QAASO,CAAc,EAEpD,SAASD,EAAWE,EAAO,CACzBA,EAAM,eAAc,EACpBN,EAAkB,UAAY,GAE9BC,EAAO,YAAcF,EAAQ,SAAS,YAAY,MAClDA,EAAQ,MAAK,EACbQ,GACF,CAEA,eAAeA,GAAsB,CACnC,GAAI,CACF,MAAMC,EAAQ,MAAMP,EAAO,aACvBA,EAAO,cAAgB,GAAKA,EAAO,YAAc,GACnDQ,EAAS,QAAQ,CACf,QAAS,oBAAoBR,EAAO,SAAS,UACrD,CAAO,EAEHS,EAAYF,EAAM,IAAI,CAC1B,MAAU,CACNC,EAAS,MAAM,CACb,QAAS,qDACf,CAAK,CACF,CACH,CAEA,SAASC,EAAYC,EAAO,CAC1B,GAAI,CAACA,EAAM,OAAQ,CACjBF,EAAS,MAAM,CACb,QACE,0EACR,CAAK,EACD,MACD,CACD,MAAMG,EAASD,EACZ,IACC,CAAC,CACC,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA,mBACIL,CAAa;AAAA,wBACRD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,kBAIhCC,CAAK;AAAA;AAAA;AAAA;AAAA,kBAILC,CAAK;AAAA;AAAA;AAAA;AAAA,kBAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,kBAIRC,CAAS;AAAA;AAAA;AAAA,iBAKtB,EACA,KAAK,EAAE,EACVnB,EAAkB,mBAAmB,YAAaY,CAAM,EACxDV,EAAS,QAAO,EAChBD,EAAO,QAAO,CAChB,CACA,SAASI,GAAiB,CACxB,KAAK,MAAQ,EACbE,GACF"}